<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Details article</title>
<link rel="stylesheet" th:href="@{/css/style.css}" />
<link rel="stylesheet" th:href="@{/css/profile.css}" />
</head>
<body>
	<div th:replace="~{fragments/fragment-entete::entete}"></div>


<!-- <div th:each="article : ${articles}"> -->
<!-- 	<div class="card"> -->
		<img th:src="@{'/uploads/' + ${articleVendu.imagePath}}" alt="Image de l'article" />
		<div class="container">
			<h2 th:text="${articleVendu.nomArticle}"><b></b></h2>
			<h4 th:text="${articleVendu.categorie.libelle}"></h4>
				<p th:text="${articleVendu.description}"></p>
			<h6>Meilleure offre :</h6>
				<p th:if="${enchere != null}"
				th:text="${enchere.montantEnchere +' par ' +enchere.encherisseur.pseudo}"></p>
				<p th:if="${enchere == null}">Aucune enchère n'a été effectuée sur cet article.</p>
			<h6>Mise à prix :</h6>
				<p th:text="${articleVendu.miseAPrix}"></p>
			<h6>Date de fin des enchères :</h6>
				<p th:text="${articleVendu.dateFinEncheres}"></p>
			<h6>Téléphone :</h6>
				<p th:text="${articleVendu.vendeur.telephone}"></p>
			<h6>Ville de retrait :</h6>
				<p th:text="${articleVendu.lieuRetrait.ville}"></p>
			<h6>Vendeur :</h6>
				<p th:text="${articleVendu.vendeur.pseudo}"></p>
		</div>
<!-- 	</div> -->
<!-- </div> -->
<div th:if="${articleVendu.etatVente == 0 && articleVendu.vendeur.noUtilisateur != utilisateur.noUtilisateur}">
	<form method="post" th:action="@{/encherir}">
		<input type="hidden" name="articleId" th:value="${articleVendu.noArticle}" /> 
		<div th:if="${erreur != null}" th:text="${erreur}"></div>
		<label for="montant">Montant :</label>
		<input type="number" id="montant" name="montant" min="1" required />
		<button type="submit">Enchérir</button>
	</form>
</div>
<h2 th:if="${articleVendu.etatVente == -1}">Les enchères n'ont pas encore débuté</h2>
<h2 th:if="${articleVendu.etatVente == -1 && articleVendu.vendeur.noUtilisateur == utilisateur.noUtilisateur}">bouton modifier/supprimer article - à faire</h2>
<h2 th:if="${articleVendu.etatVente == 2 && utilisateur.noUtilisateur != acheteur.noUtilisateur}" th:text="${'Enchère remportée par '+acheteur.pseudo}"></h2>
<h2 th:if="${articleVendu.etatVente == 2 && utilisateur.noUtilisateur == acheteur.noUtilisateur}">
    <span th:utext="${'Vous avez remporté l''enchère pour un montant de ' + enchere.montantEnchere + '. <br>Veuillez vous rapprocher de '}"></span>
    <a th:href="@{/view-seller(noVendeur=${articleVendu.vendeur.noUtilisateur})}"  th:text="${articleVendu.vendeur.pseudo}"></a>
    <span th:utext="${' pour effectuer le retrait.'}"></span>
</h2>
<h2 th:if="${articleVendu.etatVente == 1}">Vente terminée - Aucune enchère n'a été effectuée sur cet article.</h2>

	<footer th:replace="~{fragments/fragment-piedpage::piedpage}"></footer>
</body>
</html>
