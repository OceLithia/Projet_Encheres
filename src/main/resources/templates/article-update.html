<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Modifier article</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link rel="stylesheet" th:href="@{/css/profile.css}" />
</head>
<body>
    <div th:replace="~{fragments/fragment-entete::entete}"></div>

    <div class="container">
        <h2>Modifier l'article</h2>

        <form action="/article/update" method="post" th:object="${articleVendu}" enctype="multipart/form-data">
            <img th:src="@{'/uploads/' + ${articleVendu.imagePath}}" alt="Image de l'article" />
            <input type="hidden" th:field="*{noArticle}" />
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

            <label for="nomArticle">Nom de l'article :</label>
            <input type="text" id="nomArticle" th:field="*{nomArticle}" />

            <label for="categorie">Catégorie :</label>
            <select id="categorie" th:field="*{categorie.noCategorie}">
                <option th:each="categorie : ${categories}"
                        th:value="${categorie.noCategorie}" 
                        th:text="${categorie.libelle}"
                        th:selected="${categorie.noCategorie == articleVendu.categorie.noCategorie}">
                </option>
            </select>

            <label for="description">Description :</label>
            <textarea id="description" th:field="*{description}"></textarea>

            <label for="miseAPrix">Mise à prix :</label>
            <input type="number" id="miseAPrix" th:field="*{miseAPrix}"/>

			<label for="dateDebutEncheres">Date de début des enchères :</label>
            <input type="datetime-local" id="dateDebutEncheres" th:field="*{dateDebutEncheres}"/> <!-- th:value="*{dateDebutEncheres}" --> 
            
            <label for="dateFinEncheres">Date de fin des enchères :</label>
            <input type="datetime-local" id="dateFinEncheres" th:field="*{dateFinEncheres}"/> <!-- th:value="*{dateFinEncheres}" -->

            <label for="telephone">Téléphone :</label>
            <input type="text" id="telephone" th:field="*{vendeur.telephone}" />

 			<label for="rueRetrait">Rue de retrait :</label>
            <input type="text" id="rueRetrait" th:field="*{lieuRetrait.rue}" />
            
            <label for="villeRetrait">Ville de retrait :</label>
            <input type="text" id="villeRetrait" th:field="*{lieuRetrait.ville}" />
            
            <label for="codePostal">Code postal de retrait :</label>
            <input type="text" id="codePostal" th:field="*{lieuRetrait.codePostal}" />

            <label for="image">Modifier l'image :</label>
            <input type="file" id="image" name="image" accept="image/*" />

            <button type="submit" class="btn btn-success">Mettre à jour</button>
        </form>

        <a href="/article-detail" class="btn btn-secondary">Retour</a>
        <a th:href="@{/delete-article-detail(noArticle=${articleVendu.noArticle})}" class="btn btn-danger">Supprimer l'article</a>
    </div>

    <footer th:replace="~{fragments/fragment-piedpage::piedpage}"></footer>
</body>
</html>