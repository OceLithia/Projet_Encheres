<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Accueil</title>
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	<link rel="stylesheet" th:href="@{/css/filters.css}" />
	<link rel="stylesheet" th:href="@{/css/cards.css}" />
	<link rel="icon" href="/img/logo.png" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Playfair+Display+SC:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Playfair+Display+SC:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>

<body>
	<div th:replace="~{fragments/fragment-header::header}"></div>
	<div th:replace="~{fragments/fragment-logo::logo}"></div>
<main>

 <!-- Affichage des messages de succès ou d'erreur -->
    <div th:if="${successMessage}" class="alert alert-success">
        <p th:text="${successMessage}"></p>
    </div>
    <div th:if="${errorMessage}" class="alert alert-danger">
        <p th:text="${errorMessage}"></p>
    </div>
    
<h1>Liste des enchères</h1>

	<form th:action="@{/filtrer}" method="GET">
	    <!-- Champ de recherche -->
    <input type="text" id="motCle" name="motCle" placeholder="Le nom de l'article contient..."/>
		<select name="idCat" id="category">
			<option value="" disabled selected>Choisir une catégorie</option>
			<option th:each="cat : ${categories}" th:value="${cat.noCategorie}"
				th:text="${cat.libelle}"></option>
		</select>
		<button type="submit">Rechercher</button>
	</form>

<div class="grid">
	<article th:each="e : ${articles}">
		<div class="articleCard">
			<img th:src="@{'/uploads/' + ${e.imagePath}}" alt="Image de l'article" />
 
			<div class="container">
				<h2 th:text="${e.nomArticle}"><b></b></h2>
				<h4 th:text="${e.categorie.libelle}"></h4>
				<h6>Prix actuel :</h6>
					<p th:text="${e.prixVente}"></p>
				<h6>Date de fin des enchères :</h6>
					<p th:text="${e.dateFinEncheres}"></p>
				<h6>Ville de retrait :</h6>
					<p th:text="${e.lieuRetrait.ville}"></p>
				<h6>Vendeur :</h6>
					<p th:text="${e.vendeur.pseudo}"></p>
				<a th:href="@{/article-detail(noArticle=${e.noArticle})}" class="button">Détails</a>
			</div>
		</div>
	</article>
</div>

</main>
	<footer th:replace="~{fragments/fragment-footer::footer}"></footer>
</body>
</html>